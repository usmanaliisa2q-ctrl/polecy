<script>
    document.getElementById('deleteForm').addEventListener('submit', function(event) {
        event.preventDefault(); 

        const email = document.getElementById('email').value;
        const responseDiv = document.getElementById('responseMessage');
        const submitButton = this.querySelector('button');

        // Function URL (Isko apne URL se replace karein)
        const functionUrl = 'https://asia-south1-your-project-id.cloudfunctions.net/deleteUserAccount'; 

        submitButton.disabled = true;
        submitButton.textContent = 'Processing...';
        responseDiv.style.display = 'none';

        // Backend function ko call karein
        fetch(functionUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email: email }),
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                responseDiv.textContent = 'Your account deletion request has been successfully processed. Your data has been removed from our systems.';
                responseDiv.className = 'message success';
            } else {
                responseDiv.textContent = `Error: ${data.message || 'An unexpected error occurred.'}`;
                responseDiv.className = 'message error';
            }
        })
        .catch(error => {
            console.error('Fetch Error:', error);
            responseDiv.textContent = 'A network error occurred. Please try again later.';
            responseDiv.className = 'message error';
        })
        .finally(() => {
            submitButton.disabled = false;
            submitButton.textContent = 'Request Account Deletion';
        });
    });
</script>
